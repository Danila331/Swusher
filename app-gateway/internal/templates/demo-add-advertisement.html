<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Демо: Добавить объявление - Swusher</title>
    <link rel="stylesheet" href="/css/style.css">
    <link rel="stylesheet" href="/css/pages.css">
    <link rel="stylesheet" href="/css/add-advertisement.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <nav class="navbar">
            <div class="logo">
                <a href="/">Swusher</a>
            </div>
            <div class="nav-links">
                <a href="/catalog">Каталог</a>
                <a href="/how-it-works">Как это работает</a>
                <a href="/about">О нас</a>
                <a href="/contacts">Контакты</a>
            </div>
            <div class="auth-buttons">
                <a href="/login/" class="btn btn-outline">Войти</a>
                <a href="/register/" class="btn btn-primary">Регистрация</a>
            </div>
            <div class="mobile-menu-btn">
                <span class="burger-line"></span>
                <span class="burger-line"></span>
                <span class="burger-line"></span>
            </div>
        </nav>
        <div class="mobile-nav" id="mobileNav">
            <div class="mobile-nav-content">
                <div class="mobile-nav-links">
                    <a href="/catalog">Каталог</a>
                    <a href="/how-it-works">Как это работает</a>
                    <a href="/about">О нас</a>
                    <a href="/contacts">Контакты</a>
                </div>
                <div class="mobile-auth-buttons">
                    <a href="/login/" class="btn btn-outline mobile-btn">Войти</a>
                    <a href="/register/" class="btn btn-primary mobile-btn">Регистрация</a>
                </div>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="page-hero">
        <div class="container">
            <h1>Добавить объявление</h1>
            <p>Разместите свою вещь в аренду и начните зарабатывать</p>
        </div>
    </section>

    <!-- Add Advertisement Form Section -->
    <section class="add-advertisement-section">
        <div class="container">
            <div class="add-advertisement-container">
                <div class="section-title">
                    <h2>Информация об объявлении</h2>
                    <p>Заполните все поля для создания привлекательного объявления</p>
                </div>
                
                <form class="add-advertisement-form" id="advertisementForm">
                    <!-- Основная информация -->
                    <div class="form-section">
                        <h3><i class="fas fa-info-circle"></i> Основная информация</h3>
                        
                        <div class="form-group">
                            <label for="title">Название объявления *</label>
                            <input type="text" id="title" name="title" placeholder="Например: Велосипед горный для активного отдыха" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="category">Категория *</label>
                            <select id="category" name="category" required>
                                <option value="">Выберите категорию</option>
                                <option value="clothing">Одежда</option>
                                <option value="electronics">Техника</option>
                                <option value="furniture">Мебель</option>
                                <option value="tools">Инструменты</option>
                                <option value="sports">Спорт</option>
                                <option value="transport">Транспорт</option>
                                <option value="books">Книги</option>
                                <option value="other">Другое</option>
                            </select>
                        </div>
                        
                        <div class="form-group">
                            <label for="description">Описание *</label>
                            <textarea id="description" name="description" rows="4" placeholder="Подробно опишите вашу вещь, её состояние, особенности использования..." required></textarea>
                        </div>
                    </div>

                    <!-- Цены -->
                    <div class="form-section">
                        <h3><i class="fas fa-tag"></i> Цены</h3>
                        
                        <div class="pricing-grid">
                            <div class="form-group">
                                <label for="cost_per_day">Цена за день (₽) *</label>
                                <input type="number" id="cost_per_day" name="cost_per_day" min="0" step="0.01" placeholder="500" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="cost_per_week">Цена за неделю (₽)</label>
                                <input type="number" id="cost_per_week" name="cost_per_week" min="0" step="0.01" placeholder="3000">
                            </div>
                            
                            <div class="form-group">
                                <label for="cost_per_month">Цена за месяц (₽)</label>
                                <input type="number" id="cost_per_month" name="cost_per_month" min="0" step="0.01" placeholder="12000">
                            </div>
                        </div>
                    </div>

                    <!-- Фотографии -->
                    <div class="form-section">
                        <h3><i class="fas fa-camera"></i> Фотографии</h3>
                        <p class="form-hint">Добавьте качественные фотографии вашей вещи. Первая фотография будет главной.</p>
                        
                        <div class="photo-upload-area" id="photoUploadArea">
                            <div class="upload-placeholder">
                                <i class="fas fa-cloud-upload-alt"></i>
                                <p>Перетащите фотографии сюда или нажмите для выбора</p>
                                <span>Максимум 10 фотографий, до 5 МБ каждая</span>
                            </div>
                            <input type="file" id="photoInput" name="photos" multiple accept="image/*" style="display: none;">
                        </div>
                        
                        <div class="photo-preview-grid" id="photoPreviewGrid"></div>
                    </div>

                    <!-- Правила аренды -->
                    <div class="form-section">
                        <h3><i class="fas fa-clipboard-list"></i> Правила аренды</h3>
                        
                        <div class="form-group">
                            <label for="rental_rules">Правила и условия *</label>
                            <textarea id="rental_rules" name="rental_rules" rows="4" placeholder="Опишите правила использования, ограничения, требования к арендатору..." required></textarea>
                        </div>
                    </div>

                    <!-- Местоположение -->
                    <div class="form-section">
                        <h3><i class="fas fa-map-marker-alt"></i> Местоположение</h3>
                        
                        <div class="location-grid">
                            <div class="form-group">
                                <label for="location">Адрес или район *</label>
                                <input type="text" id="location" name="location" placeholder="Например: Центральный район, ул. Ленина, 10" required>
                            </div>
                            
                            <div class="form-group">
                                <label for="geolocation_x">Координата X (широта)</label>
                                <input type="number" id="geolocation_x" name="geolocation_x" step="0.000001" placeholder="55.7558">
                            </div>
                            
                            <div class="form-group">
                                <label for="geolocation_y">Координата Y (долгота)</label>
                                <input type="number" id="geolocation_y" name="geolocation_y" step="0.000001" placeholder="37.6176">
                            </div>
                        </div>
                        
                        <div class="map-container" id="mapContainer">
                            <div id="map" style="height: 300px; background: #f0f0f0; border-radius: 8px; display: flex; align-items: center; justify-content: center;">
                                <p>Карта будет загружена здесь</p>
                            </div>
                        </div>
                    </div>

                    <!-- Дополнительные настройки -->
                    <div class="form-section">
                        <h3><i class="fas fa-cog"></i> Дополнительные настройки</h3>
                        
                        <div class="form-group form-checks">
                            <label>
                                <input type="checkbox" name="instant_booking" value="true">
                                Разрешить мгновенное бронирование
                            </label>
                        </div>
                        
                        <div class="form-group form-checks">
                            <label>
                                <input type="checkbox" name="negotiable" value="true">
                                Цена договорная
                            </label>
                        </div>
                        
                        <div class="form-group form-checks">
                            <label>
                                <input type="checkbox" name="delivery_available" value="true">
                                Возможна доставка
                            </label>
                        </div>
                    </div>

                    <!-- Кнопки действий -->
                    <div class="form-actions">
                        <button type="button" class="btn btn-outline" onclick="saveDraft()">
                            <i class="fas fa-save"></i> Сохранить черновик
                        </button>
                        <button type="submit" class="btn btn-primary btn-large">
                            <i class="fas fa-paper-plane"></i> Опубликовать объявление
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer stylish-footer">
        <div class="footer-inner">
            <a href="/" class="footer-logo">Swusher</a>
            <div class="footer-socials">
                <a href="#" class="footer-social vk" aria-label="VK"><i class="fab fa-vk"></i></a>
                <a href="#" class="footer-social tg" aria-label="Telegram"><i class="fab fa-telegram"></i></a>
                <a href="#" class="footer-social ig" aria-label="Instagram"><i class="fab fa-instagram"></i></a>
            </div>
        </div>
        <div class="footer-bottom stylish-footer-bottom">
            <p>&copy; 2025 Swusher. Все права защищены.</p>
        </div>
    </footer>

    <script>
        // Демо-версия JavaScript для тестирования
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('advertisementForm');
            const photoInput = document.getElementById('photoInput');
            const photoUploadArea = document.getElementById('photoUploadArea');
            const photoPreviewGrid = document.getElementById('photoPreviewGrid');
            
            let uploadedPhotos = [];
            
            // Form submission (демо)
            form.addEventListener('submit', function(event) {
                event.preventDefault();
                
                if (validateForm()) {
                    alert('Демо: Форма успешно отправлена! Данные будут отправлены на сервер в реальном приложении.');
                    
                    // Показать данные формы в консоли
                    const formData = new FormData(form);
                    const data = Object.fromEntries(formData.entries());
                    console.log('Данные формы:', data);
                    console.log('Загруженные фото:', uploadedPhotos.length);
                }
            });
            
            // Photo upload functionality
            photoUploadArea.addEventListener('click', () => photoInput.click());
            photoInput.addEventListener('change', handlePhotoUpload);
            
            // Drag and drop for photos
            photoUploadArea.addEventListener('dragover', handleDragOver);
            photoUploadArea.addEventListener('dragleave', handleDragLeave);
            photoUploadArea.addEventListener('drop', handleDrop);
            
            // Price calculation helpers
            const costPerDayInput = document.getElementById('cost_per_day');
            const costPerWeekInput = document.getElementById('cost_per_week');
            const costPerMonthInput = document.getElementById('cost_per_month');
            
            costPerDayInput.addEventListener('input', calculatePrices);
            costPerWeekInput.addEventListener('input', calculatePrices);
            costPerMonthInput.addEventListener('input', calculatePrices);
            
            // Mobile menu
            const mobileMenuBtn = document.querySelector('.mobile-menu-btn');
            const mobileNav = document.getElementById('mobileNav');
            
            if (mobileMenuBtn && mobileNav) {
                mobileMenuBtn.addEventListener('click', function() {
                    mobileMenuBtn.classList.toggle('active');
                    mobileNav.classList.toggle('active');
                });
            }
            
            function handlePhotoUpload(event) {
                const files = Array.from(event.target.files);
                processPhotoFiles(files);
            }
            
            function handleDragOver(event) {
                event.preventDefault();
                photoUploadArea.classList.add('dragover');
            }
            
            function handleDragLeave(event) {
                event.preventDefault();
                photoUploadArea.classList.remove('dragover');
            }
            
            function handleDrop(event) {
                event.preventDefault();
                photoUploadArea.classList.remove('dragover');
                
                const files = Array.from(event.dataTransfer.files);
                const imageFiles = files.filter(file => file.type.startsWith('image/'));
                
                if (imageFiles.length > 0) {
                    processPhotoFiles(imageFiles);
                }
            }
            
            function processPhotoFiles(files) {
                const maxFiles = 10;
                const maxSize = 5 * 1024 * 1024; // 5MB
                
                if (uploadedPhotos.length + files.length > maxFiles) {
                    alert(`Максимальное количество фотографий: ${maxFiles}`);
                    return;
                }
                
                files.forEach(file => {
                    if (file.size > maxSize) {
                        alert(`Файл ${file.name} слишком большой. Максимальный размер: 5MB`);
                        return;
                    }
                    
                    if (!file.type.startsWith('image/')) {
                        alert(`Файл ${file.name} не является изображением`);
                        return;
                    }
                    
                    const reader = new FileReader();
                    reader.onload = function(e) {
                        const photoData = {
                            file: file,
                            preview: e.target.result,
                            id: Date.now() + Math.random()
                        };
                        
                        uploadedPhotos.push(photoData);
                        updatePhotoPreview();
                    };
                    reader.readAsDataURL(file);
                });
            }
            
            function updatePhotoPreview() {
                photoPreviewGrid.innerHTML = '';
                
                uploadedPhotos.forEach((photo, index) => {
                    const photoItem = document.createElement('div');
                    photoItem.className = 'photo-preview-item';
                    photoItem.innerHTML = `
                        <img src="${photo.preview}" alt="Фото ${index + 1}">
                        <button type="button" class="remove-photo" onclick="removePhoto(${photo.id})">
                            <i class="fas fa-times"></i>
                        </button>
                        <div class="photo-order">${index + 1}</div>
                    `;
                    photoPreviewGrid.appendChild(photoItem);
                });
                
                const uploadPlaceholder = photoUploadArea.querySelector('.upload-placeholder p');
                if (uploadedPhotos.length === 0) {
                    uploadPlaceholder.textContent = 'Перетащите фотографии сюда или нажмите для выбора';
                } else {
                    uploadPlaceholder.textContent = `Загружено ${uploadedPhotos.length} фото. Добавить еще`;
                }
            }
            
            function removePhoto(photoId) {
                uploadedPhotos = uploadedPhotos.filter(photo => photo.id !== photoId);
                updatePhotoPreview();
            }
            
            function calculatePrices() {
                const costPerDay = parseFloat(costPerDayInput.value) || 0;
                
                if (costPerDay > 0) {
                    if (!costPerWeekInput.value) {
                        costPerWeekInput.value = Math.round(costPerDay * 7 * 0.9);
                    }
                    if (!costPerMonthInput.value) {
                        costPerMonthInput.value = Math.round(costPerDay * 30 * 0.8);
                    }
                }
            }
            
            function validateForm() {
                const requiredFields = ['title', 'category', 'description', 'cost_per_day', 'rental_rules', 'location'];
                
                for (let fieldName of requiredFields) {
                    const field = document.querySelector(`[name="${fieldName}"]`);
                    if (!field.value.trim()) {
                        alert(`Пожалуйста, заполните поле "${field.previousElementSibling.textContent.replace(' *', '')}"`);
                        field.focus();
                        return false;
                    }
                }
                
                if (uploadedPhotos.length === 0) {
                    alert('Добавьте хотя бы одну фотографию');
                    return false;
                }
                
                return true;
            }
            
            // Глобальная функция для удаления фото
            window.removePhoto = removePhoto;
            
            // Глобальная функция для сохранения черновика
            window.saveDraft = function() {
                alert('Демо: Черновик сохранен в localStorage');
                const formData = new FormData(form);
                const data = Object.fromEntries(formData.entries());
                localStorage.setItem('advertisement_draft', JSON.stringify(data));
            };
        });
    </script>
</body>
</html> 